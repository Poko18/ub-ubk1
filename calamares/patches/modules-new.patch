diff -Nur orig/src/modules/chrootcfg/main.py mod/src/modules/chrootcfg/main.py
--- orig/src/modules/chrootcfg/main.py	2017-11-22 09:52:44.000000000 +0100
+++ mod/src/modules/chrootcfg/main.py	2017-11-22 19:51:43.000000000 +0100
@@ -87,8 +87,9 @@
 class PacmanController:
     def __init__(self, root):
         self.__root = root
-        self.__operations = \
-            libcalamares.globalstorage.value("packageOperations")
+#        self.__operations = \
+#            libcalamares.globalstorage.value("packageOperations")
+        self.__operations = libcalamares.job.configuration.get('packageoperations', [])
         self.__tracker = OperationTracker()
         self.__keyrings = libcalamares.job.configuration.get('keyrings', [])
 
@@ -169,20 +170,17 @@
         check_target_env_call(cmd)
 
     def run(self, rank=False):
-        for op in self.operations.keys():
-            if op == "install":
-                self.install()
-            elif op == "remove":
-                self.tracker.total(len(self.operations["remove"]))
-                self.remove()
-
-#        self.init_keyring()
-#        self.populate_keyring()
-        if rank:
-            self.rank_mirrors()
+        if isinstance(self.operations,(dict,)):
+            for op in self.operations.keys():
+                if op == "install":
+                    self.install()
+                elif op == "remove":
+                    self.tracker.total(len(self.operations["remove"]))
+                    self.remove()
+            if rank:
+                self.rank_mirrors()
         return None
 
-
 class ChrootController:
     def __init__(self):
         self.__root = libcalamares.globalstorage.value('rootMountPoint')
diff -Nur orig/src/modules/packages/main.py mod/src/modules/packages/main.py
--- orig/src/modules/packages/main.py	2017-11-19 14:27:03.000000000 +0100
+++ mod/src/modules/packages/main.py	2017-11-22 20:22:08.000000000 +0100
@@ -152,50 +152,96 @@
     :param pkgman:
     :param entry:
     """
-    for key in entry.keys():
-        entry[key] = subst_locale(entry[key])
-        if key == "install":
-            if isinstance(entry[key], list):
-                for package in entry[key]:
-                    pkgman.run(package["pre-script"])
-                    pkgman.install([package["package"]])
-                    pkgman.run(package["post-script"])
-            else:
-                pkgman.install(entry[key])
-        elif key == "try_install":
-            # we make a separate package manager call for each package so a
-            # single failing package won't stop all of them
-            for package in entry[key]:
-                if isinstance(package, str):
-                    try:
-                        pkgman.install([package])
-                    except subprocess.CalledProcessError:
-                        warn_text = "WARNING: could not install package "
-                        warn_text += package
-                        libcalamares.utils.debug(warn_text)
-                else:
-                    try:
+    if isinstance(entry,(dict,)):
+        for key in entry.keys():
+            entry[key] = subst_locale(entry[key])
+            if key == "install":
+                if isinstance(entry[key], list):
+                    for package in entry[key]:
                         pkgman.run(package["pre-script"])
                         pkgman.install([package["package"]])
                         pkgman.run(package["post-script"])
+                else:
+                    pkgman.install(entry[key])
+            elif key == "try_install":
+                # we make a separate package manager call for each package so a
+                # single failing package won't stop all of them
+                for package in entry[key]:
+                    if isinstance(package, str):
+                        try:
+                            pkgman.install([package])
+                        except subprocess.CalledProcessError:
+                            warn_text = "WARNING: could not install package "
+                            warn_text += package
+                            libcalamares.utils.debug(warn_text)
+                    else:
+                        try:
+                            pkgman.run(package["pre-script"])
+                            pkgman.install([package["package"]])
+                            pkgman.run(package["post-script"])
+                        except subprocess.CalledProcessError:
+                            warn_text = "WARNING: could not install packages "
+                            warn_text += package["package"]
+                            libcalamares.utils.debug(warn_text)
+            elif key == "remove":
+                pkgman.remove(entry[key])
+            elif key == "try_remove":
+                for package in entry[key]:
+                    try:
+                        pkgman.remove([package])
                     except subprocess.CalledProcessError:
-                        warn_text = "WARNING: could not install packages "
-                        warn_text += package["package"]
+                        warn_text = "WARNING: could not remove package "
+                        warn_text += package
                         libcalamares.utils.debug(warn_text)
-        elif key == "remove":
-            pkgman.remove(entry[key])
-        elif key == "try_remove":
-            for package in entry[key]:
-                try:
-                    pkgman.remove([package])
-                except subprocess.CalledProcessError:
-                    warn_text = "WARNING: could not remove package "
-                    warn_text += package
-                    libcalamares.utils.debug(warn_text)
-        elif key == "localInstall":
-            pkgman.install(entry[key], from_local=True)
-
-
+            elif key == "localInstall":
+                pkgman.install(entry[key], from_local=True)
+    else:
+        print (type(entry))
+        print (entry)
+        for valami in entry:
+            for key in valami.keys():
+                valami[key] = subst_locale(valami[key])
+                if key == "install":
+                    # we make a separate package manager call for each package
+                    if isinstance(valami[key], list):
+                        for package in valami[key]:
+                            if isinstance(package, str):
+                                pkgman.install([package])
+                            else:
+                                pkgman.install([package["package"]])
+                elif key == "try_install":
+                    # we make a separate package manager call for each package so a
+                    # single failing package won't stop all of them
+                    for package in valami[key]:
+                        if isinstance(package, str):
+                            try:
+                                pkgman.install([package])
+                            except subprocess.CalledProcessError:
+                                warn_text = "WARNING: could not install package "
+                                warn_text += package
+                                libcalamares.utils.debug(warn_text)
+                        else:
+                            try:
+                                pkgman.run(package["pre-script"])
+                                pkgman.install([package["package"]])
+                                pkgman.run(package["post-script"])
+                            except subprocess.CalledProcessError:
+                                warn_text = "WARNING: could not install packages "
+                                warn_text += package["package"]
+                                libcalamares.utils.debug(warn_text)
+                elif key == "remove":
+                    pkgman.remove(valami[key])
+                elif key == "try_remove":
+                    for package in valami[key]:
+                        try:
+                            pkgman.remove([package])
+                        except subprocess.CalledProcessError:
+                            warn_text = "WARNING: could not remove package "
+                            warn_text += package
+                            libcalamares.utils.debug(warn_text)
+                elif key == "localInstall":
+                    pkgman.install(valami[key], from_local=True)
+            
 def run():
     """
     Calls routine with detected package manager to install locale packages
