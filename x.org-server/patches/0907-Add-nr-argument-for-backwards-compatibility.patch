From a68c07024e45365ab04fdab86a429b1dbc595a64 Mon Sep 17 00:00:00 2001
From: Paulo Zanoni <pzanoni@mandriva.com>
Date: Tue, 1 Mar 2011 10:38:01 -0300
Subject: [PATCH 907/908] Add "-nr" argument for backwards compatibility

We used to have patch implementing this argument. The patch was integrated
upstream but as "-background none" instead of "-nr". Let's keep the "-nr"
option while we still have "-nr" users.
---
 os/utils.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/os/utils.c b/os/utils.c
index 36cb46f..60ff643 100644
--- a/os/utils.c
+++ b/os/utils.c
@@ -506,6 +506,7 @@ UseMsg(void)
     ErrorF("-nolisten string       don't listen on protocol\n");
     ErrorF("-noreset               don't reset after last client exists\n");
     ErrorF("-background [none]     create root window with no background\n");
+    ErrorF("-nr                    same as '-background none'\n");
     ErrorF("-reset                 reset after last client exists\n");
     ErrorF("-p #                   screen-saver pattern duration (minutes)\n");
     ErrorF("-pn                    accept failure to listen on all ports\n");
@@ -758,6 +759,9 @@ ProcessCommandLine(int argc, char *argv[
         else if (strcmp(argv[i], "-reset") == 0) {
             dispatchExceptionAtReset = DE_RESET;
         }
+	else if ( strcmp( argv[i], "-nr") == 0)	{
+	    bgNoneRoot = TRUE;
+	}
         else if (strcmp(argv[i], "-p") == 0) {
             if (++i < argc)
                 defaultScreenSaverInterval = ((CARD32) atoi(argv[i])) *
-- 
1.7.6

